
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../misc/controllers/">
      
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Getting Started - CRISP Controllers - Learning Systems Lab</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CRISP Controllers - Learning Systems Lab" class="md-header__button md-logo" aria-label="CRISP Controllers - Learning Systems Lab" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CRISP Controllers - Learning Systems Lab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/utiasDSL/crisp_controllers" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CRISP Controllers - Learning Systems Lab" class="md-nav__button md-logo" aria-label="CRISP Controllers - Learning Systems Lab" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    CRISP Controllers - Learning Systems Lab
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/utiasDSL/crisp_controllers" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-getting-the-low-level-c-crisp-controller-ready" class="md-nav__link">
    <span class="md-ellipsis">
      1. Getting the low-level C++ CRISP controller ready
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-use-the-python-interface-crisp_py-to-control-the-robot" class="md-nav__link">
    <span class="md-ellipsis">
      2. Use the python interface CRISP_PY to control the robot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Use the python interface CRISP_PY to control the robot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#try-it-out-with-the-robot" class="md-nav__link">
    <span class="md-ellipsis">
      Try it out with the robot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-adding-cameras-grippers-and-further-sensors-to-crisp_py" class="md-nav__link">
    <span class="md-ellipsis">
      3. Adding cameras, grippers, and further sensors to CRISP_PY
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Adding cameras, grippers, and further sensors to CRISP_PY">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cameras" class="md-nav__link">
    <span class="md-ellipsis">
      Cameras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grippers" class="md-nav__link">
    <span class="md-ellipsis">
      Grippers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensors" class="md-nav__link">
    <span class="md-ellipsis">
      Sensors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-getting-started-with-crisp_gym" class="md-nav__link">
    <span class="md-ellipsis">
      4. Getting started with CRISP_GYM
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Getting started with CRISP_GYM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teleoperation-record-data-in-lerobotformat" class="md-nav__link">
    <span class="md-ellipsis">
      Teleoperation: Record data in LeRobotFormat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Teleoperation: Record data in LeRobotFormat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leader-follower" class="md-nav__link">
    <span class="md-ellipsis">
      Leader-follower
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-teleop-setups" class="md-nav__link">
    <span class="md-ellipsis">
      Other teleop setups
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#train-a-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Train a policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/controllers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Available Controllers and Broadcasters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/demos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Demos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/calibrate_gripper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to calibrate a gripper
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/multi_machine_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-machine setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/diagnostics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROS2 Diagnostics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../misc/new_robot_setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting up a robot that is not available in the demos
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-getting-the-low-level-c-crisp-controller-ready" class="md-nav__link">
    <span class="md-ellipsis">
      1. Getting the low-level C++ CRISP controller ready
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-use-the-python-interface-crisp_py-to-control-the-robot" class="md-nav__link">
    <span class="md-ellipsis">
      2. Use the python interface CRISP_PY to control the robot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Use the python interface CRISP_PY to control the robot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#try-it-out-with-the-robot" class="md-nav__link">
    <span class="md-ellipsis">
      Try it out with the robot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-adding-cameras-grippers-and-further-sensors-to-crisp_py" class="md-nav__link">
    <span class="md-ellipsis">
      3. Adding cameras, grippers, and further sensors to CRISP_PY
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Adding cameras, grippers, and further sensors to CRISP_PY">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cameras" class="md-nav__link">
    <span class="md-ellipsis">
      Cameras
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grippers" class="md-nav__link">
    <span class="md-ellipsis">
      Grippers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sensors" class="md-nav__link">
    <span class="md-ellipsis">
      Sensors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-getting-started-with-crisp_gym" class="md-nav__link">
    <span class="md-ellipsis">
      4. Getting started with CRISP_GYM
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Getting started with CRISP_GYM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teleoperation-record-data-in-lerobotformat" class="md-nav__link">
    <span class="md-ellipsis">
      Teleoperation: Record data in LeRobotFormat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Teleoperation: Record data in LeRobotFormat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leader-follower" class="md-nav__link">
    <span class="md-ellipsis">
      Leader-follower
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-teleop-setups" class="md-nav__link">
    <span class="md-ellipsis">
      Other teleop setups
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#train-a-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Train a policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="getting-started">Getting started</h1>
<p>Here is an overview of the framework.</p>
<p><img alt="Stack overview" src="../media/crisp_overview.png#only-light" />
<img alt="Stack overview" src="../media/crisp_overview_dark.png#only-dark" /></p>
<p>Overview</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> 1. The first part is the setup for the low-level controllers, i.e., <a href="https://github.com/utiasDSL/crisp_controllers">crisp_controllers</a>.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> 2. Then, you will try to move the robot using <a href="https://github.com/utiasDSL/crisp_py">CRISP_PY</a>.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> 3. After that, you can include cameras in the setup and other sensors. </li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> 4. Finally, you can set up <a href="https://github.com/utiasDSL/crisp_gym">CRISP_GYM</a> - the Gymnasium interface - and start policy deployment or teleoperation.</li>
</ul>
<h2 id="1-getting-the-low-level-c-crisp-controller-ready">1. Getting the low-level C++ CRISP controller ready</h2>
<p>The computer running the CRISP controller needs a real-time patch for the controller to run smoothly and safely. You can check out the <a href="https://frankarobotics.github.io/docs/installation_linux.html#setting-up-the-real-time-kernel">Franka Robotics guide on how to set up a RT-patch.</a>
On newer Ubuntu versions, you can use <a href="https://ubuntu.com/real-time">Ubuntu Pro</a> for an easy setup.</p>
<p>Then, check if your robot is already included in one of our demos, check <a href="../misc/demos/">how to run a demo</a> from our <a href="https://github.com/utiasDSL/crisp_controllers_demos">demos repository</a>. You can then follow the instructions there to start your robot(s) using a Docker container. Some of them offer the possibility to run the demos with simulated robots to test the setup.</p>
<p>If your robot is not included in the demos that is not problem. Check out <a href="../misc/new_robot_setup/">How to set up a robot that is not available in the demos</a>. Once you get the controllers running, feel free to open a pull request on our repo to add it to the demos! We highly appreciate that!</p>
<h2 id="2-use-the-python-interface-crisp_py-to-control-the-robot">2. Use the python <img alt="ðŸ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f40d.svg" title=":snake:" /> interface CRISP_PY to control the robot</h2>
<h3 id="installation">Installation</h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to use the gymnasium interface, CRISP_PY will be autonmatically installed in the gym. You can therefore check the installation of <a href="#4-getting-started-with-crisp_gym">CRISP_GYM</a>.
However, this section still gives you an idea on how to use CRISP_PY with your robot. We do not recommend to skip it.</p>
</div>
<p>To use <code>CRISP_PY</code>, we recommend using <a href="https://pixi.sh/latest/">pixi</a> as a package manager, a modern conda-like package manager.
It can be used in combination with <a href="https://robostack.github.io/">robostack</a> to easily install ROS2 in any machine.
There are a few ways to get you started:</p>
<p><em>... install from source:</em></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/utiasDSL/crisp_py
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span><span class="w"> </span>crisp_py
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>pixi<span class="w"> </span>install
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>pixi<span class="w"> </span>shell<span class="w"> </span>-e<span class="w"> </span>humble
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import crisp_py&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>This should not log anything if everything is fine</li>
</ol>
<p><em>... use in your already existing pixi project:</em></p>
<p>To use <code>CRISP_PY</code> in an already existing pixi project, you need to make sure that <code>ROS2</code> is available.
Check the <a href="https://github.com/utiasDSL/crisp_py/blob/main/pixi.toml">pixi.toml</a> of <code>CRISP_PY</code> to see how this looks like.
Then you can add <code>CRISP_PY</code> as a pypi package:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>pixi<span class="w"> </span>add<span class="w"> </span>--pypi<span class="w"> </span>crisp-py
</span></code></pre></div>
or
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>uv<span class="w"> </span>add<span class="w"> </span>crisp-py
</span></code></pre></div>
or
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>pip<span class="w"> </span>install<span class="w"> </span>crisp-py
</span></code></pre></div>
Double-check that everything is working by running:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import crisp_py&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>This should not log anything if everything is fine</li>
</ol>
<p>Now you can try to control the robot! Check out the <a href="https://github.com/utiasDSL/crisp_py/blob/main/examples">examples</a> for inspiration.</p>
<h3 id="try-it-out-with-the-robot">Try it out with the robot</h3>
<p>Make sure that the demo container is running in the background, as we will need it to access the robot.
From now on, you can instantiate <code>Robot</code> objects to control the robot.</p>
<details class="example">
<summary>Example robot usage:</summary>
<div class="language-py highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">crisp_py.robot</span><span class="w"> </span><span class="kn">import</span> <span class="n">Robot</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">crisp_py.robot_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">RobotConfig</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">robot_config</span> <span class="o">=</span> <span class="n">RobotConfig</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">robot</span> <span class="o">=</span> <span class="n">Robot</span><span class="p">(</span><span class="n">namespace</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">robot_config</span><span class="p">)</span>  <span class="c1"># (1)!</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">robot</span><span class="o">.</span><span class="n">wait_until_ready</span><span class="p">()</span>  <span class="c1"># (2)!</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">robot</span><span class="o">.</span><span class="n">end_effector_pose</span><span class="p">)</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="n">robot</span><span class="o">.</span><span class="n">controller_switcher_client</span><span class="o">.</span><span class="n">switch_controller</span><span class="p">(</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>    <span class="s2">&quot;cartesian_impedance_controller&quot;</span><span class="p">,</span>  <span class="c1"># (4)!</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="p">)</span>  
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">end_effector_pose</span><span class="o">.</span><span class="n">position</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="n">robot</span><span class="o">.</span><span class="n">set_target</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">-</span><span class="mf">0.1</span><span class="p">])</span>  <span class="c1"># (3)!</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="n">robot</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</span></code></pre></div>
<ol>
<li>This will get information from the robot asynchronously</li>
<li>Make sure that we get information from the robot before trying to set targets or reading the pose of the robot.</li>
<li>Set target 10 cm downwards. Careful not to send poses that are too far away from the current one!</li>
<li>This will request the controller manager to activate the cartesian impedance controller. You can use it with other controllers like the operational space controller!</li>
</ol>
</details>
<h2 id="3-adding-cameras-grippers-and-further-sensors-to-crisp_py">3. Adding cameras, grippers, and further sensors to CRISP_PY</h2>
<h3 id="cameras">Cameras</h3>
<p>To add a camera, you will need to run it in a separate container as well.
The cameras that we tested are:</p>
<ul>
<li><a href="https://github.com/IntelRealSense/realsense-ros/tree/ros2-master">Real Sense</a> which gives amazing ROS2 support,</li>
<li>and <a href="https://github.com/orbbec/OrbbecSDK_ROS2">Orbbec</a>.</li>
</ul>
<p>But any camera with <a href="https://github.com/christianrauch/camera_ros">camera_ros</a> should work.
Check the <a href="../misc/demos/">demos</a> to see some examples with cameras</p>
<details class="example">
<summary>Example camera usage:</summary>
<div class="language-py highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">cv2</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">crisp_py.camera</span><span class="w"> </span><span class="kn">import</span> <span class="n">Camera</span><span class="p">,</span> <span class="n">CameraConfig</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="n">camera_config</span> <span class="o">=</span> <span class="n">CameraConfig</span><span class="p">(</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="n">camera_name</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="n">resolution</span><span class="o">=</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="mi">256</span><span class="p">),</span>  <span class="c1"># (1)!</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    <span class="n">camera_color_image_topic</span><span class="o">=</span><span class="s2">&quot;camera_name/color/image_raw&quot;</span><span class="p">,</span>  <span class="c1"># (2)!</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="n">camera_color_info_topic</span><span class="o">=</span><span class="s2">&quot;camera_name/color/camera_info&quot;</span><span class="p">,</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">)</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="n">camera</span> <span class="o">=</span> <span class="n">Camera</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">camera_config</span><span class="p">)</span>  <span class="c1"># (3)!</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="n">camera</span><span class="o">.</span><span class="n">wait_until_ready</span><span class="p">()</span> <span class="c1"># (4)!</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;Camera Image&quot;</span><span class="p">,</span> <span class="n">camera</span><span class="o">.</span><span class="n">current_image</span><span class="p">)</span>  <span class="c1"># (5)!</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></code></pre></div>
<ol>
<li>You can define a custom resolution, independently of the resolution of the published image.</li>
<li>Set here the topic of your custom camera name</li>
<li>You can also pass <code>namespace="..."</code> to give the camera a namespace. This is required for a bimanual setup.</li>
<li>Make sure that we received an image. This will fail with a timeout if the topic is wrong or the camera is not publishing.</li>
<li>This will show you the latest received image!</li>
</ol>
</details>
<h3 id="grippers">Grippers</h3>
<p>For gripper control, you need to make sure that a ROS2 node is running that accepts commands through a topic and publishes the state of the gripper.
To use a:</p>
<ul>
<li>Franka Hand, you just need to start the demo. An <a href="https://github.com/utiasDSL/crisp_controllers_demos/blob/main/crisp_controllers_robot_demos/crisp_controllers_robot_demos/crisp_py_franka_hand_adapter.py">adapter</a> is already running to allow you to control the gripper this way,</li>
<li>Dynamixel motor to control a gripper, we used the well-maintained <a href="https://github.com/ROBOTIS-GIT/dynamixel_hardware_interface">dynamixel_hardware_interface</a> with a position controller for the gripper.</li>
</ul>
<details class="example">
<summary>Example gripper usage:</summary>
<p>You can use the gripper in <code>crisp_py</code> with:
<div class="language-py highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">crisp_py.gripper</span><span class="w"> </span><span class="kn">import</span> <span class="n">Gripper</span><span class="p">,</span> <span class="n">GripperConfig</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1"># config = GripperConfig.from_yaml(path=&quot;...&quot;)  (1)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">config</span> <span class="o">=</span> <span class="n">GripperConfig</span><span class="p">(</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="n">min_value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="n">max_value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    <span class="n">command_topic</span><span class="o">=</span><span class="s2">&quot;gripper_position_controller/commands&quot;</span><span class="p">,</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>    <span class="n">joint_state_topic</span><span class="o">=</span><span class="s2">&quot;joint_states&quot;</span><span class="p">,</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="p">)</span>  <span class="c1"># (2)!</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="n">gripper</span> <span class="o">=</span> <span class="n">Gripper</span><span class="p">(</span><span class="n">gripper_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>  <span class="c1"># (3)!</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="n">gripper</span><span class="o">.</span><span class="n">wait_until_ready</span><span class="p">()</span>  <span class="c1"># (4)!</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">gripper</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="n">gripper</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="c1"># gripper.close()</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="c1"># gripper.set_target(0.5)</span>
</span></code></pre></div></p>
<ol>
<li>You can load the configs from a yaml file. If you calibrate the gripper manually (check the crisp_py docs for more information) you can select this way your custom calibration file.</li>
<li>Set the range of allowed commands (min stands for fully closed, max to fully open) and the topics for the gripper. You can check the topics using <code>ros2 topic list</code></li>
<li>You can also pass <code>namespace="..."</code> to give the gripper a namespace. This is required for a bimanual setup.</li>
<li>Make sure that we received a gripper value. This will fail with a timeout if the topic is wrong or the gripper is not publishing.</li>
</ol>
</details>
<h3 id="sensors">Sensors</h3>
<p>You can add further sensors (Force Torque Sensor, Tactile Sensor...) by adding a custom <code>Sensor</code> that subscribes to a topic.
Check the examples for more information.</p>
<h2 id="4-getting-started-with-crisp_gym">4. Getting started with CRISP_GYM</h2>
<p>Similar to <code>CRISP_PY</code>, we recommend using <code>pixi</code> to install <code>CRISP_GYM</code>.</p>
<p><div class="language-sh highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/utiasDSL/crisp_gym
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">cd</span><span class="w"> </span>crisp_gym
</span></code></pre></div>
Now, you should set a few things before installing everything.
Create a file <code>scripts/set_env.sh</code> which will be sourced every time that you run a command in your environment.
The script will not be tracked by git.
In this script you need to add a environment variables:</p>
<ul>
<li><code>ROS_DOMAIN_ID</code>: which is used to define nodes that should be able to see each other. In our <a href="../misc/demos/">demos</a> they are set to 100 as default.</li>
<li><code>CRISP_CONFIG_PATH</code>: which should be the path to a config folder similar to <a href="https://github.com/utiasDSL/crisp_py/tree/main/config">config path of CRISP_PY</a>. The easiest way to do this is to clone CRISP_PY somewhere
and set this environment variable to point to it.</li>
</ul>
<div class="language-sh highlight"><span class="filename">scripts/set_env.sh</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span><span class="m">100</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="hll"><span class="nb">export</span><span class="w"> </span><span class="nv">CRISP_CONFIG_PATH</span><span class="o">=</span>/path/to/crisp_py/config<span class="w">  </span><span class="c1"># (1)!</span>
</span></span></code></pre></div>
<ol>
<li>Modify this!</li>
</ol>
<p>If you want to work in a multi-machine setup (e.g. policy runs in a different machine as controllers), then check <a href="../misc/multi_machine_setup/">how to setup multi-machine in ROS2</a>.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">source</span><span class="w"> </span>scripts/configure.sh<span class="w">  </span><span class="c1"># (1)!</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>pixi<span class="w"> </span>install
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>pixi<span class="w"> </span>shell<span class="w"> </span>-e<span class="w"> </span>humble-lerobot
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import crisp_gym&quot;</span>
</span></code></pre></div>
<ol>
<li>This will set some environment variable pre-installation as well as checking that you defined the previous script properly.</li>
</ol>
<p>If the previous steps worked, then you are good to go.</p>
<h3 id="teleoperation-record-data-in-lerobotformat">Teleoperation: Record data in LeRobotFormat</h3>
<p>You can record data in <code>LeRobotFormat</code> to train a policy directly in <a href="https://github.com/huggingface/lerobot">LeRobot</a>.
You will need to use teleoperation to record data and we highly recommend using a leader-follower setup to generate episodes. </p>
<h4 id="leader-follower">Leader-follower</h4>
<p>The leader can be controlled by a human operator and the follower will mimic its motion.
Checkout <code>scripts/leader_follower_teleop.py</code> to get an idea on how the code works.
For your specific setup you need to:</p>
<ul>
<li>Define your own <code>TeleopRobotConfig</code>, check <a href="https://github.com/utiasDSL/crisp_gym/blob/main/crisp_gym/teleop/teleop_robot_config.py"><code>teleop_robot_config.py</code></a>.</li>
<li>Define your own <code>ManipulatorEnvConfig</code>, check <a href="https://github.com/utiasDSL/crisp_gym/blob/main/crisp_gym/manipulator_env_config.py"><code>manipulator_env_config.py</code></a>.</li>
</ul>
<p>Then, to record data use:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>pixi<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span>humble-lerobot<span class="w"> </span>python<span class="w"> </span>scripts/record_lerobot_format_leader_follower.py<span class="w"> </span><span class="se">\</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">   </span>--repo-id<span class="w"> </span>&lt;your_account&gt;/&lt;repo_name&gt;<span class="w"> </span><span class="c1"># (1)!</span>
</span></code></pre></div></p>
<ol>
<li>Add <code>--help</code> to check other parameters to pass to the record function.</li>
</ol>
<p>The script is interactive. It will first ask to choose the desired configuration files for the recording and then allow you to record episodes interactively.
There are two recording methods currently available:</p>
<ul>
<li><code>keyboard</code> (default): It allows you to record episodes using the keyboard with the keys <ul>
<li><strong>r</strong>(ecord start/stop) an episode,</li>
<li><strong>d</strong>(elete episode) after recording a failed episode,</li>
<li><strong>s</strong>(ave episode) after recording a succesful episode,</li>
<li><strong>q</strong>(uit) after finishing.</li>
</ul>
</li>
<li>
<p><code>ros</code>: It uses the topic <code>recording_state</code> to catch <code>String</code> ROS2 messages to follow the same recording workflow as the keyboard. 
    With this you can implement custom recording devices to control the recording workflow</p>
<details class="example">
<summary>Using the FR3 pilot buttons of Franka Robotics as a recording device</summary>
<p>In our lab, we use the buttons of the leader robot as a recording device with the <a href="https://github.com/nakama-lab/franka-buttons">franka-buttons</a> repository.
The following script uses the circle, cross, check and up buttons as a record, delete, save and quit commands respectively:
<div class="language-py highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">TODO</span>
</span></code></pre></div></p>
</details>
</li>
</ul>
<p>After this, you can visualize the episodes with rerun visualizer and LeRobot utils:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>pixi<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span>lerobot<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>lerobot.scripts.visualize_dataset<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">        </span>--repo-id<span class="w"> </span>&lt;your_account&gt;/&lt;repo_name&gt;<span class="w"> </span><span class="se">\</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">        </span>--episode-index<span class="w"> </span><span class="m">0</span>
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>LeRobot is subjected to rapid changes. This command might change in future versions.</p>
</div>
<h4 id="other-teleop-setups">Other teleop setups</h4>
<p>You can add further teleop options to <a href="https://github.com/utiasDSL/crisp_gym/blob/main/crisp_gym/teleop"><code>teleop/</code></a> and create 
a similar record script as <a href="https://github.com/utiasDSL/crisp_gym/blob/main/crisp_gym/scripts/record_lerobot_format_leader_follower.py"><code>scripts/record_lerobot_format_leader_follower.py</code></a></p>
<h3 id="train-a-policy">Train a policy</h3>
<p>You can use LeRobot train scripts to train a policy simply by running:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>pixi<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span>lerobot<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>lerobot.scripts.train<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">          </span>--dataset.repo_id<span class="o">=</span>&lt;your_account&gt;/&lt;repo_name&gt;<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">          </span>--policy.type<span class="o">=</span>diffusion<span class="w"> </span><span class="se">\</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">          </span>--policy.push_to_hub<span class="o">=</span><span class="nb">false</span>
</span></code></pre></div></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>LeRobot is subjected to rapid changes. This command might change in future versions.</p>
</div>
<p>They provide the latest implementations of most VLA.
Check <a href="https://github.com/huggingface/lerobot">LeRobot</a> for more information.</p>
<h3 id="deploy-policy">Deploy policy</h3>
<p>After training with LeRobot, you can deploy the policy with:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>pixi<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span>humble-lerobot<span class="w"> </span>python<span class="w"> </span>scripts/deploy_policy.py<span class="w"> </span><span class="c1"># (1)!</span>
</span></code></pre></div></p>
<ol>
<li>The script will interactively allow you to choose a model inside <code>outputs/train</code>. If you want to explicitly pass a path you can override it with <code>--path</code></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>LeRobot is subjected to rapid changes. This command might change in future versions.</p>
</div>
<p>Good job, now you can evaluate your model!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Home
              </div>
            </div>
          </a>
        
        
          
          <a href="../misc/controllers/" class="md-footer__link md-footer__link--next" aria-label="Next: Available Controllers and Broadcasters">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Available Controllers and Broadcasters
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/utiasDSL/crisp_controllers" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["header.autohide", "content.code.copy", "content.code.select", "content.code.annotate", "content.footnote.tooltips", "content.tooltips", "navigation.footer", "navigation.instant", "navigation.instant.progress", "navigation.top", "navigation.expand"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>